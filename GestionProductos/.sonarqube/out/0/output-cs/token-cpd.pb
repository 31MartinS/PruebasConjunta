ù
`C:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\WeatherForecast.cs
	namespace 	
GestionProductos
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ‰
XC:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
	DotNetEnv 	
.	 

Env
 
. 
Load 
( 
) 
; 
var		 
configuration		 
=		 
builder		 
.		 
Configuration		 )
;		) *
var

 
connectionString

 
=

 
configuration

 $
.

$ %
GetConnectionString

% 8
(

8 9
$str

9 L
)

L M
;

M N
var 

dbPassword 
= 
Environment 
. "
GetEnvironmentVariable 3
(3 4
$str4 A
)A B
??C E
stringF L
.L M
EmptyM R
;R S
var 
dbUser 

= 
Environment 
. "
GetEnvironmentVariable /
(/ 0
$str0 9
)9 :
??; =
$str> B
;B C
var 
dbServer 
= 
Environment 
. "
GetEnvironmentVariable 1
(1 2
$str2 =
)= >
??? A
$strB M
;M N
var 

dbDatabase 
= 
Environment 
. "
GetEnvironmentVariable 3
(3 4
$str4 A
)A B
??C E
$strF Q
;Q R
connectionString 
= 
$" 
$str 
{ 
dbServer %
}% &
$str& 0
{0 1

dbDatabase1 ;
}; <
$str< E
{E F
dbUserF L
}L M
$strM W
{W X

dbPasswordX b
}b c
$str	c 
"
 ž
;
ž Ÿ
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDBContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
connectionString )
)) *
)* +
;+ ,
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app!! 
.!! 
UseHttpsRedirection!! 
(!! 
)!! 
;!! 
app## 
.## 
UseAuthorization## 
(## 
)## 
;## 
app%% 
.%% 
MapControllers%% 
(%% 
)%% 
;%% 
await'' 
app'' 	
.''	 

RunAsync''
 
('' 
)'' 
;'' ’/
wC:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\Migrations\20250116050454_InitalCreate.cs
	namespace 	
GestionProductos
 
. 

Migrations %
{ 
public 

partial 
class 
InitalCreate %
:& '
	Migration( 1
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 F
,F G
	maxLengthH Q
:Q R
$numS U
,U V
nullableW _
:_ `
falsea f
)f g
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 4
,4 5
x6 7
=>8 :
x; <
.< =
Id= ?
)? @
;@ A
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
CategoriaId   
=    !
table  " '
.  ' (
Column  ( .
<  . /
int  / 2
>  2 3
(  3 4
type  4 8
:  8 9
$str  : ?
,  ? @
nullable  A I
:  I J
false  K P
)  P Q
,  Q R
Nombre!! 
=!! 
table!! "
.!!" #
Column!!# )
<!!) *
string!!* 0
>!!0 1
(!!1 2
type!!2 6
:!!6 7
$str!!8 G
,!!G H
	maxLength!!I R
:!!R S
$num!!T W
,!!W X
nullable!!Y a
:!!a b
false!!c h
)!!h i
,!!i j
Descripcion"" 
=""  !
table""" '
.""' (
Column""( .
<"". /
string""/ 5
>""5 6
(""6 7
type""7 ;
:""; <
$str""= L
,""L M
nullable""N V
:""V W
true""X \
)""\ ]
,""] ^
Precio## 
=## 
table## "
.##" #
Column### )
<##) *
decimal##* 1
>##1 2
(##2 3
type##3 7
:##7 8
$str##9 H
,##H I
nullable##J R
:##R S
true##T X
)##X Y
,##Y Z
Stock$$ 
=$$ 
table$$ !
.$$! "
Column$$" (
<$$( )
int$$) ,
>$$, -
($$- .
type$$. 2
:$$2 3
$str$$4 9
,$$9 :
nullable$$; C
:$$C D
true$$E I
)$$I J
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% 3
,((3 4
x((5 6
=>((7 9
x((: ;
.((; <
Id((< >
)((> ?
;((? @
table)) 
.)) 

ForeignKey)) $
())$ %
name** 
:** 
$str** C
,**C D
column++ 
:++ 
x++  !
=>++" $
x++% &
.++& '
CategoriaId++' 2
,++2 3
principalTable,, &
:,,& '
$str,,( 4
,,,4 5
principalColumn-- '
:--' (
$str--) -
,--- .
onDelete..  
:..  !
ReferentialAction.." 3
...3 4
Restrict..4 <
)..< =
;..= >
}// 
)// 
;// 
migrationBuilder11 
.11 
CreateIndex11 (
(11( )
name22 
:22 
$str22 0
,220 1
table33 
:33 
$str33 "
,33" #
column44 
:44 
$str44 %
)44% &
;44& '
}55 	
	protected88 
override88 
void88 
Down88  $
(88$ %
MigrationBuilder88% 5
migrationBuilder886 F
)88F G
{99 	
migrationBuilder:: 
.:: 
	DropTable:: &
(::& '
name;; 
:;; 
$str;; !
);;! "
;;;" #
migrationBuilder== 
.== 
	DropTable== &
(==& '
name>> 
:>> 
$str>> "
)>>" #
;>># $
}?? 	
}@@ 
}AA ›+
pC:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\Controllers\ProductosController.cs
	namespace 	
GestionProductos
 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
ProductoController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDBContext %
_appDbContext& 3
;3 4
public 
ProductoController !
(! "
AppDBContext" .
appDBContext/ ;
); <
{ 	
_appDbContext 
= 
appDBContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetProductos) 5
(5 6
)6 7
{ 	
return 
Ok 
( 
await 
_appDbContext )
.) *
	Productos* 3
.3 4
ToListAsync4 ?
(? @
)@ A
)A B
;B C
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateProducto) 7
(7 8
Producto8 @
productoA I
)I J
{ 	
if 
( 
producto 
. 
Precio 
<  !
$num" #
)# $
return% +

BadRequest, 6
(6 7
$str7 Z
)Z [
;[ \
_appDbContext 
. 
	Productos #
.# $
Add$ '
(' (
producto( 0
)0 1
;1 2
await 
_appDbContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
return 
Ok 
( 
producto 
) 
;  
} 	
[ 	
HttpPut	 
] 
public   
async   
Task   
<   
IActionResult   '
>  ' (
EditarProducto  ) 7
(  7 8
Producto  8 @
producto  A I
)  I J
{!! 	
if"" 
("" 
producto"" 
."" 
Precio"" 
<""  !
$num""" #
)""# $
return""% +

BadRequest"", 6
(""6 7
$str""7 e
)""e f
;""f g
var## 
productoExistente## !
=##" #
await##$ )
_appDbContext##* 7
.##7 8
	Productos##8 A
.##A B
	FindAsync##B K
(##K L
producto##L T
.##T U
Id##U W
)##W X
;##X Y
if%% 
(%% 
productoExistente%% !
==%%" $
null%%% )
)%%) *
return%%+ 1
NotFound%%2 :
(%%: ;
$str%%; R
)%%R S
;%%S T
productoExistente'' 
.'' 
Nombre'' $
=''% &
producto''' /
.''/ 0
Nombre''0 6
;''6 7
productoExistente(( 
.(( 
Descripcion(( )
=((* +
producto((, 4
.((4 5
Descripcion((5 @
;((@ A
productoExistente)) 
.)) 
Precio)) $
=))% &
producto))' /
.))/ 0
Precio))0 6
;))6 7
productoExistente** 
.** 
Stock** #
=**$ %
producto**& .
.**. /
Stock**/ 4
;**4 5
await,, 
_appDbContext,, 
.,,  
SaveChangesAsync,,  0
(,,0 1
),,1 2
;,,2 3
return.. 
Ok.. 
(.. 
productoExistente.. '
)..' (
;..( )
}// 	
[11 	

HttpDelete11	 
(11 
$str11 
)11 
]11 
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
EliminarProducto22) 9
(229 :
int22: =
id22> @
)22@ A
{33 	
var44 
productoExistente44 !
=44" #
await44$ )
_appDbContext44* 7
.447 8
	Productos448 A
.44A B
	FindAsync44B K
(44K L
id44L N
)44N O
;44O P
if66 
(66 
productoExistente66 !
==66" $
null66% )
)66) *
return77 
NotFound77 
(77  
$str77  7
)777 8
;778 9
_appDbContext99 
.99 
	Productos99 #
.99# $
Remove99$ *
(99* +
productoExistente99+ <
)99< =
;99= >
await;; 
_appDbContext;; 
.;;  
SaveChangesAsync;;  0
(;;0 1
);;1 2
;;;2 3
return== 
Ok== 
(== 
$"== 
$str== (
{==( )
id==) +
}==+ ,
$str==, D
"==D E
)==E F
;==F G
}>> 	
}@@ 
}AA þ1
qC:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\Controllers\CategoriasController.cs
	namespace 	
GestionProductos
 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
CategoriaController		 $
:		% &
ControllerBase		' 5
{

 
private 
readonly 
AppDBContext %
_appDbContext& 3
;3 4
public 
CategoriaController "
(" #
AppDBContext# /
appDbContext0 <
)< =
{ 	
_appDbContext 
= 
appDbContext (
;( )
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCategorias) 6
(6 7
)7 8
{ 	
var 

categorias 
= 
await "
_appDbContext# 0
.0 1

Categorias1 ;
.; <
ToListAsync< G
(G H
)H I
;I J
return 
Ok 
( 

categorias  
)  !
;! "
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetCategoriaById) 9
(9 :
int: =
id> @
)@ A
{ 	
var 
	categoria 
= 
await !
_appDbContext" /
./ 0

Categorias0 :
./ 0
FirstOrDefaultAsync0 C
(C D
cD E
=>F H
cI J
.J K
IdK M
==N P
idQ S
)S T
;T U
if   
(   
	categoria   
==   
null   !
)  ! "
return!! 
NotFound!! 
(!!  
$str!!  9
)!!9 :
;!!: ;
return## 
Ok## 
(## 
	categoria## 
)##  
;##  !
}$$ 	
['' 	
HttpPost''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
CreateCategoria(() 8
(((8 9
	Categoria((9 B
	categoria((C L
)((L M
{)) 	
if** 
(** 
	categoria** 
==** 
null** !
)**! "
return++ 

BadRequest++ !
(++! "
$str++" L
)++L M
;++M N
_appDbContext-- 
.-- 

Categorias-- $
.--$ %
Add--% (
(--( )
	categoria--) 2
)--2 3
;--3 4
await.. 
_appDbContext.. 
...  
SaveChangesAsync..  0
(..0 1
)..1 2
;..2 3
return00 
CreatedAtAction00 "
(00" #
nameof00# )
(00) *
GetCategoriaById00* :
)00: ;
,00; <
new00= @
{00A B
id00C E
=00F G
	categoria00H Q
.00Q R
Id00R T
}00U V
,00V W
	categoria00X a
)00a b
;00b c
}11 	
[44 	
HttpPut44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
IActionResult55 '
>55' (
UpdateCategoria55) 8
(558 9
int559 <
id55= ?
,55? @
	Categoria55A J
	categoria55K T
)55T U
{66 	
if77 
(77 
id77 
!=77 
	categoria77 
.77  
Id77  "
)77" #
return88 

BadRequest88 !
(88! "
$str88" E
)88E F
;88F G
var:: 
categoriaExistente:: "
=::# $
await::% *
_appDbContext::+ 8
.::8 9

Categorias::9 C
.::C D
	FindAsync::D M
(::M N
id::N P
)::P Q
;::Q R
if;; 
(;; 
categoriaExistente;; "
==;;# %
null;;& *
);;* +
return<< 
NotFound<< 
(<<  
$str<<  9
)<<9 :
;<<: ;
categoriaExistente>> 
.>> 
Nombre>> %
=>>& '
	categoria>>( 1
.>>1 2
Nombre>>2 8
;>>8 9
await@@ 
_appDbContext@@ 
.@@  
SaveChangesAsync@@  0
(@@0 1
)@@1 2
;@@2 3
returnBB 
	NoContentBB 
(BB 
)BB 
;BB 
}CC 	
[FF 	

HttpDeleteFF	 
(FF 
$strFF 
)FF 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
DeleteCategoriaGG) 8
(GG8 9
intGG9 <
idGG= ?
)GG? @
{HH 	
varII 
	categoriaII 
=II 
awaitII !
_appDbContextII" /
.II/ 0

CategoriasII0 :
.II: ;
	FindAsyncII; D
(IID E
idIIE G
)IIG H
;IIH I
ifJJ 
(JJ 
	categoriaJJ 
==JJ 
nullJJ !
)JJ! "
returnKK 
NotFoundKK 
(KK  
$strKK  9
)KK9 :
;KK: ;
_appDbContextMM 
.MM 

CategoriasMM $
.MM$ %
RemoveMM% +
(MM+ ,
	categoriaMM, 5
)MM5 6
;MM6 7
awaitNN 
_appDbContextNN 
.NN  
SaveChangesAsyncNN  0
(NN0 1
)NN1 2
;NN2 3
returnPP 
OkPP 
(PP 
$"PP 
$strPP )
{PP) *
idPP* ,
}PP, -
$strPP- E
"PPE F
)PPF G
;PPG H
}QQ 	
}RR 
}SS ê0
]C:\Users\HP\source\repos\U2_Pruebas_Testing\GestionProductos\GestionProductos\AppDBContext.cs
	namespace 	
GestionProductos
 
{ 
public 

class 
AppDBContext 
: 
	DbContext  )
{ 
public 
AppDBContext 
( 
DbContextOptions ,
<, -
AppDBContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}V W
public		 
required		 
DbSet		 
<		 
Producto		 &
>		& '
	Productos		( 1
{		2 3
get		4 7
;		7 8
set		9 <
;		< =
}		> ?
public

 
required

 
DbSet

 
<

 
	Categoria

 '
>

' (

Categorias

) 3
{

4 5
get

6 9
;

9 :
set

; >
;

> ?
}

@ A
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Producto  (
>( )
() *
)* +
. 
HasOne 
< 
	Categoria !
>! "
(" #
)# $
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
p  
=>! #
p$ %
.% &
CategoriaId& 1
)1 2
. 
OnDelete 
( 
DeleteBehavior (
.( )
Restrict) 1
)1 2
;2 3
modelBuilder 
. 
Entity 
<  
Producto  (
>( )
() *
)* +
. 
Property 
( 
p 
=> 
p  
.  !
Id! #
)# $
. 
ValueGeneratedOnAdd $
($ %
)% &
;& '
modelBuilder 
. 
Entity 
<  
Producto  (
>( )
() *
)* +
. 
Property 
( 
p 
=> 
p  
.  !
Nombre! '
)' (
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num !
)! "
;" #
modelBuilder 
. 
Entity 
<  
Producto  (
>( )
() *
)* +
. 
Property 
( 
p 
=> 
p  
.  !
Precio! '
)' (
. 
HasColumnType 
( 
$str .
). /
;/ 0
modelBuilder 
. 
Entity 
<  
	Categoria  )
>) *
(* +
)+ ,
. 
Property 
( 
c 
=> 
c  
.  !
Id! #
)# $
. 
ValueGeneratedOnAdd $
($ %
)% &
;& '
modelBuilder 
. 
Entity 
<  
	Categoria  )
>) *
(* +
)+ ,
.   
Property   
(   
c   
=>   
c    
.    !
Nombre  ! '
)  ' (
.!! 

IsRequired!! 
(!! 
)!! 
."" 
HasMaxLength"" 
("" 
$num""  
)""  !
;""! "
modelBuilder## 
.## 
Entity## 
<##  
Producto##  (
>##( )
(##) *
)##* +
.$$ 
HasKey$$ 
($$ 
p$$ 
=>$$ 
p$$ 
.$$ 
Id$$ !
)$$! "
;$$" #
modelBuilder%% 
.%% 
Entity%% 
<%%  
	Categoria%%  )
>%%) *
(%%* +
)%%+ ,
.&& 
HasKey&& 
(&& 
c&& 
=>&& 
c&& 
.&& 
Id&& !
)&&! "
;&&" #
}'' 	
}(( 
public)) 

class)) 
Producto)) 
{** 
[++ 	
JsonRequired++	 
]++ 
public,, 
int,, 
Id,, 
{,, 
get,, 
;,, 
set,,  
;,,  !
},," #
[-- 	
JsonRequired--	 
]-- 
public.. 
int.. 
CategoriaId.. 
{..  
get..! $
;..$ %
set..& )
;..) *
}..+ ,
public// 
required// 
string// 
Nombre// %
{//& '
get//( +
;//+ ,
set//- 0
;//0 1
}//2 3
public00 
string00 
?00 
Descripcion00 "
{00# $
get00% (
;00( )
set00* -
;00- .
}00/ 0
public11 
decimal11 
?11 
Precio11 
{11  
get11! $
;11$ %
set11& )
;11) *
}11+ ,
public22 
int22 
?22 
Stock22 
{22 
get22 
;22  
set22! $
;22$ %
}22& '
}33 
public44 

class44 
	Categoria44 
{55 
[66 	
JsonRequired66	 
]66 
public77 
int77 
Id77 
{77 
get77 
;77 
set77  
;77  !
}77" #
public88 
required88 
string88 
Nombre88 %
{88& '
get88( +
;88+ ,
set88- 0
;880 1
}882 3
}99 
}:: 